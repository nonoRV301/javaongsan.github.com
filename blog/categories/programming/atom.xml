<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: programming | Ong Swee San]]></title>
  <link href="http://javaongsan.github.com/blog/categories/programming/atom.xml" rel="self"/>
  <link href="http://javaongsan.github.com/"/>
  <updated>2012-11-23T10:31:36+08:00</updated>
  <id>http://javaongsan.github.com/</id>
  <author>
    <name><![CDATA[Your Name]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Ruby on Rails Beginners Guide]]></title>
    <link href="http://javaongsan.github.com/blog/2008/05/13/ruby-on-rails-beginners-guide/"/>
    <updated>2008-05-13T14:01:25+08:00</updated>
    <id>http://javaongsan.github.com/blog/2008/05/13/ruby-on-rails-beginners-guide</id>
    <content type="html"><![CDATA[<p>This tutorial is taken from the book â€œ<a href="http://rcm.amazon.com/e/cm?t=wizcoder-20&amp;o=1&amp;p=8&amp;l=as1&amp;asins=1590597524&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;lc1=0000FF&amp;bc1=000000&amp;bg1=FFFFFF&amp;f=ifr"><strong>Ruby on Rails Made Easy by Justin Williams</strong></a>â€. It's a very good beginners guide but some of the code are not compatible with the new version of RoR. I repost it here with the necessary changes. I have remove a lot of the explanations and simplify the whole tutorial. If you like to understand more about the code syntax visit <a href="http://www.rubyonrails.org/docs">http://www.rubyonrails.org/docs</a> or consider buying the book.</p>

<p>I am making use of a all-in-one development environment called Instant Rails. Instant Rails is a one-stop Rails runtime solution containing Ruby, Rails, Apache, and MySQL, all preconfigured and ready to run. No installer, you simply drop it into the directory of your choice and run it. It does not modify your system environment.</p>

<p><strong>Installation </strong></p>

<p>Download and install â€œInstant Railsâ€ from <a href="http://instantrails.rubyforge.org/wiki/wiki.pl">http://instantrails.rubyforge.org/wiki/wiki.pl</a></p>

<p><strong>Creating a Rails project</strong></p>

<p>Open up a new command prompt window (Start âž¤ Run âž¤ cmd) and navigate to the directory where instant rails is located.</p>

<p>Type use_ruby at the command prompt and press Enter. These setup the environment you need to create a new application.</p>

<p>To create a new project with the name railslist, type rails railslist at the command prompt and press Enter. Your output look similar to this.</p>

<p><strong>G:\InstantRails-2.0-win\rails_apps>rails railslist</strong></p>

<p><strong>create</strong></p>

<p><strong>create  app/controllers</strong></p>

<p><strong>create  app/helpers</strong></p>

<p><strong>create  app/models</strong></p>

<p><strong>create  app/views/layouts</strong></p>

<p><strong>create  config/environments</strong></p>

<p><strong>create  config/initializers</strong></p>

<p><strong>create  db</strong></p>

<p><strong>create  doc</strong></p>

<p><strong>create  lib</strong></p>

<p><strong>create  lib/tasks</strong></p>

<p><strong>create  log</strong></p>

<p><strong>create  public/images</strong></p>

<p><strong>create  public/javascripts</strong></p>

<p><strong>create  public/stylesheets</strong></p>

<p><strong>create  script/performance</strong></p>

<p><strong>create  script/process</strong></p>

<p><strong>create  test/fixtures</strong></p>

<p><strong>create  test/functional</strong></p>

<p><strong>create  test/integration</strong></p>

<p><strong>create  test/mocks/development</strong></p>

<p><strong>create  test/mocks/test</strong></p>

<p><strong>create  test/unit</strong></p>

<p><strong>create  vendor</strong></p>

<p><strong>create  vendor/plugins</strong></p>

<p><strong>create  tmp/sessions</strong></p>

<p><strong>create  tmp/sockets</strong></p>

<p><strong>create  tmp/cache</strong></p>

<p><strong>create  tmp/pids</strong></p>

<p><strong>create  Rakefile</strong></p>

<p><strong>create  README</strong></p>

<p><strong>create  app/controllers/application.rb</strong></p>

<p><strong>create  app/helpers/application_helper.rb</strong></p>

<p><strong>create  test/test_helper.rb</strong></p>

<p><strong>create  config/database.yml</strong></p>

<p><strong>create  config/routes.rb</strong></p>

<p><strong>create  public/.htaccess</strong></p>

<p><strong>create  config/initializers/inflections.rb</strong></p>

<p><strong>create  config/initializers/mime_types.rb</strong></p>

<p><strong>create  config/boot.rb</strong></p>

<p><strong>create  config/environment.rb</strong></p>

<p><strong>create  config/environments/production.rb</strong></p>

<p><strong>create  config/environments/development.rb</strong></p>

<p><strong>create  config/environments/test.rb</strong></p>

<p><strong>create  script/about</strong></p>

<p><strong>create  script/console</strong></p>

<p><strong>create  script/destroy</strong></p>

<p><strong>create  script/generate</strong></p>

<p><strong>create  script/performance/benchmarker</strong></p>

<p><strong>create  script/performance/profiler</strong></p>

<p><strong>create  script/performance/request</strong></p>

<p><strong>create  script/process/reaper</strong></p>

<p><strong>create  script/process/spawner</strong></p>

<p><strong>create  script/process/inspector</strong></p>

<p><strong>create  script/runner</strong></p>

<p><strong>create  script/server</strong></p>

<p><strong>create  script/plugin</strong></p>

<p><strong>create  public/dispatch.rb</strong></p>

<p><strong>create  public/dispatch.cgi</strong></p>

<p><strong>create  public/dispatch.fcgi</strong></p>

<p><strong>create  public/404.html</strong></p>

<p><strong>create  public/422.html</strong></p>

<p><strong>create  public/500.html</strong></p>

<p><strong>create  public/index.html</strong></p>

<p><strong>create  public/favicon.ico</strong></p>

<p><strong>create  public/robots.txt</strong></p>

<p><strong>create  public/images/rails.png</strong></p>

<p><strong>create  public/javascripts/prototype.js</strong></p>

<p><strong>create  public/javascripts/effects.js</strong></p>

<p><strong>create  public/javascripts/dragdrop.js</strong></p>

<p><strong>create  public/javascripts/controls.js</strong></p>

<p><strong>create  public/javascripts/application.js</strong></p>

<p><strong>create  doc/README_FOR_APP</strong></p>

<p><strong>create  log/server.log</strong></p>

<p><strong>create  log/production.log</strong></p>

<p><strong>create  log/development.log</strong></p>

<p><strong>create  log/test.log</strong></p>

<p>To see your new website.</p>

<p>Start Instant Rails by executing InstantRails.exe. By default, both Apache and Mysql should be started.</p>

<p><img src="file:///C:/Users/JAVAON~1/AppData/Local/Temp/moz-screenshot.jpg" alt="" /></p>

<p><img src="file:///C:/Users/JAVAON~1/AppData/Local/Temp/moz-screenshot-1.jpg" alt="" /></p>

<p>Click on the I icon select â€œRails Application>Manage applicationâ€, you see a list of application including railslist.</p>

<p>To start the web server check railslist and click the button â€œStart with Mongrelâ€. A command prompt window will show you the URL where the new site is located such as <a href="http://localhost:3000/">http://localhost:3000</a>. Type this in your web browser and you should see this page.</p>

<p><strong>Creating the database</strong></p>

<p>We use phpmyadmin to create 3 new database. Go to your browser and type in <a href="http://loclhost/mysql/">http://loclhost/mysql/</a></p>

<p>you enter the phpmyadmin page.</p>

<p>Enter railslist_development in the â€œ<strong>Create new Databaseâ€</strong> text box and click the button â€œ<strong>Create</strong>â€.</p>

<p>Repeat and create railslist_test and railslist_deployment databases.</p>

<p><strong>Telling Rails about the databases</strong></p>

<p>Open InstantRails-2.0-win\rails_apps\railslist\config\database.yml with your text editor and make the following changes</p>

<p><strong>development:
adapter: mysql
database: railslist_development
username: root
password:
host: localhost
timeout: 5000</strong></p>

<p>**# Warning: The database defined as 'test' will be erased and</p>

<h1>re-generated from your development database when you run 'rake'.</h1>

<h1>Do not set this db to the same as development or production.</h1>

<p>test:
adapter: mysql
database: railslist_test
username: root
password:
host: localhost**</p>

<p><strong>production:
adapter: mysql
database: railslist_deployment
username: root
password:
host: localhost</strong></p>

<p><strong>Creating the model</strong></p>

<p>To use the model generator for this example, open up a command prompt, go to the directory in which the application is located, and then type ruby script/generate model Classified. You should see the following:</p>

<p><strong>cd ~/railslist/</strong></p>

<p><strong>ruby script/generate model Classified</strong></p>

<p><strong>exists app/models/</strong></p>

<p><strong>exists test/unit/</strong></p>

<p><strong>exists test/fixtures/</strong></p>

<p><strong>create app/models/classified.rb</strong></p>

<p><strong>create test/unit/classified_test.rb</strong></p>

<p><strong>create test/fixtures/classifieds.yml</strong></p>

<p><strong>create db/migrate</strong></p>

<p><strong>create db/migrate/001_create_classifieds.rb</strong></p>

<p>You're telling the generator to create a model called Classified to store instances of classified ads. Each time you create a Classified model, you're pulling a row from the database table.</p>

<p><strong>Rails migrations</strong></p>

<p>A migration file contains basic Ruby syntax that describes the data structure of a database table. It is used to create the tables in your database.</p>

<p>Go to your railslist directory and open up the 001_create_classifieds.rb file in the InstantRails-2.0-in/rails_apps/railslist/db/migrate folder. Replace the default code in your 001_create_classifieds.rb migration file with the following and save your changes:</p>

<p><strong>class CreateClassifieds &lt; ActiveRecord::Migration</strong></p>

<p><strong>def self.up</strong></p>

<p><strong>create_table :classifieds do |t|</strong></p>

<p><strong>t.column :title, :string</strong></p>

<p><strong>t.column :price, :float</strong></p>

<p><strong>t.column :location, :string</strong></p>

<p><strong>t.column :description, :text</strong></p>

<p><strong>t.column :email, :string</strong></p>

<p><strong>t.column :created_at, :timestamp</strong></p>

<p><strong>t.column :updated_at, :timestamp</strong></p>

<p><strong>end</strong></p>

<p><strong>end</strong></p>

<p><strong>def self.down</strong></p>

<p><strong>drop_table :classifieds</strong></p>

<p><strong>end</strong></p>

<p><strong>end</strong></p>

<p>Migrations support all the basic data types: :string, :text, :integer, :float, :datetime, :timestamp, :time, :date, :binary and :boolean:</p>

<p>:string is for small data types such as a classified title</p>

<p>:text is for longer pieces of textual data, such as the description</p>

<p>:integer is for whole numbers</p>

<p>:float is for decimals</p>

<p>:datetime and :timestamp store the date and time into a column</p>

<p>:date and :time store either the date only or time only</p>

<p>:binary is for storing data such as images, audio, or movies</p>

<p>:boolean is for storing true or false values</p>

<p>Go to a command prompt and go to the InstantRails-2.0-in/rails_apps/railslist/ directory, in which</p>

<p>the application is located, and then type rake <a href="db:migrate">db:migrate</a></p>

<p><strong>rake db:migrate</strong></p>

<p><strong>(in G:/InstantRails-2.0-win/rails_apps/railslist)</strong></p>

<p><strong>== 1 CreateClassifieds: migrating =============================================</strong></p>

<p><strong>-- create_table(:classifieds)</strong></p>

<p><strong>-> 2.6970s</strong></p>

<p><strong>== 1 CreateClassifieds: migrated (2.6970s) ====================================</strong></p>

<p>The database now has a table in which to store the classified ad data</p>

<p><strong>Creating the controller</strong></p>

<p>Now you need to write the basic code to manipulate the model. To create a controller, open up a command prompt and go to the directory in which the application is located; then type ruby script/generate controller Classified</p>

<p><strong>ruby script/generate controller Classified</strong></p>

<p><strong>exists app/controllers/</strong></p>

<p><strong>exists app/helpers/</strong></p>

<p><strong>create app/views/classified</strong></p>

<p><strong>exists test/functional/</strong></p>

<p><strong>create app/controllers/classified_controller.rb</strong></p>

<p><strong>create test/functional/classified_controller_test.rb</strong></p>

<p><strong>create app/helpers/classified_helper.rb</strong></p>

<p>Open classified_controller.rb file located under app/controllers. Modify the file to look like the following and save your changes:</p>

<p><strong>class ClassifiedController &lt; ApplicationController
def list
@classifieds = Classified.find(:all)
end
def show
@classified = Classified.find(params[:id])
end
def new
end
def create
end
def edit
end
def update
end
def delete
end
end
</strong></p>

<p><strong>Creating the views</strong></p>

<p>Create a file called list.rhtml using your favorite text editor and save it to InstantRails-2.0-in/rails_apps/railslist/app/views/classified. After creating and saving the file, refresh your web browser. You should see a blank page; if you don't, check the spelling of your file and make sure that it is the exactly the same as your controller's method.</p>

<p>Put some code into the list.rhtml file.</p>

<p><strong>&lt;% if @classifieds.blank? %></strong></p>

<p>**</p>

<p>There are not any ads currently in the system.</p>

<p>**</p>

<p><strong>&lt;% else %></strong></p>

<p>**</p>

<p>These are the current classified ads in our system</p>

<p>**</p>

<p>**</p>

<p>**</p>

<p><strong>&lt;% @classifieds.each do |c| %></strong></p>

<p><strong>
  * &lt;%= link_to c.title, {:action => 'show', :id => c.id} -%>
</strong></p>

<p><strong>&lt;% end %></strong></p>

<hr />

<p><strong>&lt;% end %></strong></p>

<p>**</p>

<p>&lt;%= link_to "Add new ad", {:action => 'new' }%></p>

<p>**</p>

<p><strong>Creating the first objects</strong></p>

<p>Go back to your classified_controller.rb file in InstantRails-2.0-in/rails_apps/railslist/app/controllers and edit the new method to look like this:</p>

<p><strong>def new</strong></p>

<p><strong>@classified = Classified.new</strong></p>

<p><strong>end</strong></p>

<p>The line you added to the new method lets Rails know that you will create a new object in this view. Create the corresponding new.rhtml file in InstantRails-2.0-in/rails_apps/railslist/app/views/ classified.</p>

<p>You'll create a basic input form to accept new classified postings. Add the following code to the new.rhtml file and save it:</p>

<p>**</p>

<h1>Post new classified</h1>

<p>**</p>

<p>**&lt;% form_tag 'create'  do -%></p>

<p>Title</p>

<p>&lt;%= text_field 'classified', 'title' %></p>

<p>Price</p>

<p>&lt;%= text_field 'classified', 'price' %></p>

<p>Location</p>

<p>&lt;%= text_field 'classified', 'location' %></p>

<p>Description</p>

<p>&lt;%= text_area 'classified', 'description' %></p>

<p>Email</p>

<p>&lt;%= text_field 'classified', 'email' %></p>

<p><strong>
</strong>&lt;%= submit_tag 'Create' %>
&lt;% end -%>
&lt;%= link_to 'Back', {:action => 'list'} %>**</p>

<p>Edit the create method in the classified_controller.rb to match the following:</p>

<p><strong>def create</strong></p>

<p><strong>@classified = Classified.new(params[:classified])</strong></p>

<p><strong>if @classified.save</strong></p>

<p><strong>redirect_to :action => 'list'</strong></p>

<p><strong>else</strong></p>

<p><strong>render :action => 'new'</strong></p>

<p><strong>end</strong></p>

<p><strong>end</strong></p>

<p>Go to your browser and visit http://localhost:3000/classified/new, enter some data into the form, and submit it.</p>

<p>The data should submit successfully and redirect you to the list page, in which you now have a single item listed. If you click the link, you should see another Template is missing error since you haven't created the template file yet.</p>

<p>Create a show.rhtml file under InstantRails-2.0-in/rails_apps/railslist/app/views/classified and populate it with the</p>

<p>following code:</p>

<p>**</p>

<h1>&lt;%= @classified.title %></h1>

<p>**</p>

<p>**</p>

<p><strong>Price: </strong> $&lt;%= @classified.price %><br/>
**</p>

<p><strong><strong>Location: </strong> &lt;%= @classified.location %><br/>
</strong></p>

<p><strong><strong>Date Posted:</strong> &lt;%= @classified.created_at %><br/>
</strong></p>

<p><strong><strong>Last updated:</strong> &lt;%= @classified.updated_at %></strong></p>

<p>**</p>

<p>**</p>

<p>**</p>

<p>&lt;%= @classified.description %></p>

<p>**</p>

<p>**</p>

<hr />

<p>**</p>

<p>**</p>

<p>Interested? Contact &lt;%= mail_to @classified.email -%></p>

<p>**</p>

<p><strong>&lt;%= link_to 'Back', {:action => 'list'} %></strong></p>

<p><strong>Updating existing ads</strong></p>

<p>Modify the classified_controller.rb edit and update methods to look like the following:</p>

<p><strong>def edit</strong></p>

<p><strong>@classified = Classified.find(params[:id])</strong></p>

<p><strong>end</strong></p>

<p><strong>def update</strong></p>

<p><strong>@classified = Classified.find(params[:id])</strong></p>

<p><strong>if @classified.update_attributes(params[:classified])</strong></p>

<p><strong>redirect_to :action => 'show', :id => @classified</strong></p>

<p><strong>else</strong></p>

<p><strong>render :action => 'edit'</strong></p>

<p><strong>end</strong></p>

<p><strong>end</strong></p>

<p>Create a new file called edit.rhtml and save it in InstantRails-2.0-in/rails_apps/railslist/app/views/classified. Populate</p>

<p>it with the following code:</p>

<p>**</p>

<h1>Editing Classified: &lt;%= @classified.title -%></h1>

<p>**</p>

<p><strong>&lt;% form_tag( {:action => 'update', :id => @classified}) do  %></strong></p>

<p>**</p>

<p>Title<br/>
**</p>

<p>**&lt;%= text_field 'classified', 'title' %></p>

<p>**</p>

<p>**</p>

<p>Price<br/>
**</p>

<p>**&lt;%= text_field 'classified', 'price' %></p>

<p>**</p>

<p>**</p>

<p>Location<br/>
**</p>

<p>**&lt;%= text_field 'classified', 'location' %></p>

<p>**</p>

<p>**</p>

<p>Description<br/>
**</p>

<p>**&lt;%= text_area 'classified', 'description' %></p>

<p>**</p>

<p>**</p>

<p>Email<br/>
**</p>

<p>**&lt;%= text_field 'classified', 'email' %></p>

<p>**</p>

<p><strong>&lt;%= submit_tag "Save changes" %></strong></p>

<p><strong>&lt;% end -%></strong></p>

<p><strong>&lt;%= link_to 'Back', {:action => 'list' } %></strong></p>

<p>edit the list.rhtml file go to the
* element and modify it to look like the following:</p>

<p>**</p>

<hr />

<p><strong>&lt;%= link_to c.title, {:action => "show", :id => c.id} -%></strong></p>

<p><strong> &lt;%= link_to 'Edit', {:action => "edit",</strong></p>

<p><strong>:id => c.id} %></strong></p>

<p><strong>
</strong></p>

<p>Point your browser to http://localhost:3000/classified/list and test the new functionality.</p>

<p><strong>Removing an ad</strong></p>

<p>modify list.rhtml</p>

<p>Go to the
* element and modify it to look like the following:</p>

<p>**</p>

<hr />

<p><strong>&lt;%= link_to c.title, {:action => 'show', :id => c.id} -%></strong></p>

<p><strong> &lt;%= link_to 'Edit', {:action => 'edit',</strong></p>

<p><strong>:id => c.id} %></strong></p>

<p><strong> &lt;%= link_to "Delete", {:action => 'delete', :id => c.id},</strong></p>

<p><strong>:confirm => "Are you sure you want to delete this item?" %></strong></p>

<p><strong>
</strong></p>

<p>Open classified_controller.rb and modify the delete method as follows:</p>

<p><strong>def delete</strong></p>

<p><strong>Classified.find(params[:id]).destroy</strong></p>

<p><strong>redirect_to :action => 'list'</strong></p>

<p><strong>end</strong></p>

<p><strong>Adding some style</strong></p>

<p>Add a new file called standard.rhtml to InstantRails-2.0-in/rails_apps/railslist/app/views/layouts.</p>

<p>Open up the classified_controller.rb file in app/controllers and add the following line just below the first line:</p>

<p>layout 'standard'</p>

<p>You are telling the controller that you want to use the layout in the standard.rhtml file.</p>

<p>go to http://localhost:3000/classified/list you should see that the template is now implemented,</p>

<p>Create a new file called style.css and save it in InstantRails-2.0-in/rails_apps/railslist//public/stylesheets.</p>

<p><strong>* {</strong></p>

<p><strong>margin: 0;</strong></p>

<p><strong>padding:0;</strong></p>

<p><strong>}</strong></p>

<p><strong>body {</strong></p>

<p><strong>font-family: Helvetica, Geneva, Arial, sans-serif;</strong></p>

<p><strong>font-size: small;</strong></p>

<p><strong>font-color: #000;</strong></p>

<p><strong>background-color: #fff;</strong></p>

<p><strong>}</strong></p>

<p><strong>a:link, a:active, a:visited {</strong></p>

<p><strong>color: #CD0000;</strong></p>

<p><strong>}</strong></p>

<p><strong>a:hover {</strong></p>

<p><strong>color: #F70000;</strong></p>

<p><strong>}</strong></p>

<p><strong>input { margin-bottom: 5px;}</strong></p>

<p><strong>p { line-height: 150%; }</strong></p>

<p><strong>div#container {</strong></p>

<p><strong>width: 760px;</strong></p>

<p><strong>margin: 0 auto;</strong></p>

<p><strong>}</strong></p>

<p><strong>div#header {</strong></p>

<p><strong>text-align: center;</strong></p>

<p><strong>padding-bottom: 15px;</strong></p>

<p><strong>}</strong></p>

<p><strong>div#content {</strong></p>

<p><strong>float: left;</strong></p>

<p><strong>width: 450px;</strong></p>

<p><strong>padding: 10px;</strong></p>

<p><strong>}</strong></p>

<p><strong>div#content h3 {</strong></p>

<p><strong>margin-top: 15px;</strong></p>

<p><strong>}</strong></p>

<p><strong>ul#classifieds {</strong></p>

<p><strong>list-style-type: none;</strong></p>

<p><strong>}</strong></p>

<p><strong>ul#classifieds li {</strong></p>

<p><strong>line-height: 140%;</strong></p>

<p><strong>}</strong></p>

<p><strong>div#sidebar {</strong></p>

<p><strong>width: 200px;</strong></p>

<p><strong>margin-left: 480px;</strong></p>

<p><strong>}</strong></p>

<p>Refresh your browser and you should see your application displayed with a bit more style. Thats all folks!</p>
]]></content>
  </entry>
  
</feed>
